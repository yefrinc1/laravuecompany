import { defineComponent as h, ref as u, watch as k, onMounted as x, getCurrentInstance as D, unref as _, onBeforeUnmount as j, setBlockTracking as v, createElementVNode as b, mergeProps as S, renderSlot as A } from "vue";
const y = [
  "childRow",
  "column-sizing",
  "column-visibility",
  "destroy",
  "draw",
  "error",
  "init",
  "length",
  "order",
  "page",
  "preDraw",
  "preInit",
  "preXhr",
  "processing",
  "requestChild",
  "search",
  "stateLoadParams",
  "stateLoaded",
  "stateSaveParams",
  "xhr",
  "autoFill",
  "preAutoFill",
  "buttons-action",
  "buttons-processing",
  "column-reorder",
  "key",
  "key-blur",
  "key-focus",
  "key-refocus",
  "key-return-submit",
  "responsive-display",
  "responsive-resize",
  "rowgroup-datasrc",
  "pre-row-reorder",
  "row-reorder",
  "row-reordered",
  "dtsb-inserted",
  "deselect",
  "select",
  "select-blur",
  "selectItems",
  "selectStyle",
  "user-select",
  "stateRestore-change"
];
let d;
const C = {
  name: "Datatables.netVue",
  inheritAttrs: !1,
  use(s) {
    d = s;
  }
}, E = /* @__PURE__ */ h({
  ...C,
  props: {
    ajax: null,
    columns: null,
    data: null,
    options: null
  },
  emits: y,
  setup(s, { expose: i }) {
    const r = s, c = u(null), a = u(), w = u([]);
    k(
      () => r.data,
      (e) => {
        var o, n, p, m;
        let t = (o = a.value) == null ? void 0 : o.data().toArray();
        for (let l of e)
          t != null && t.includes(l) || (n = a.value) == null || n.row.add(l);
        if (typeof t < "u")
          for (let l of t)
            e.includes(l) || (p = a.value) == null || p.row((I, g) => g === l).remove();
        (m = a.value) == null || m.rows().invalidate().draw(!1), f(e);
      },
      {
        deep: !0
      }
    ), x(() => {
      const e = D();
      let t = r.options || {};
      if (r.data && (t.data = r.data, f(t.data)), r.columns && (t.columns = r.columns), r.ajax && (t.ajax = r.ajax), !d)
        throw new Error(
          "DataTables library not set. See https://datatables.net/tn/19 for details."
        );
      a.value = new d(_(c), t);
      for (let o of y)
        a.value && e && a.value.on(o, (n) => {
          e.emit(o, { event: n, dt: a });
        });
    }), j(() => {
      var e;
      (e = a.value) == null || e.destroy(!0);
    });
    function f(e) {
      w.value = e.value ? e.value.slice() : e.slice();
    }
    return i({
      dt: a
    }), (e, t) => t[0] || (v(-1), t[0] = b("div", { class: "datatable" }, [
      b("table", S({
        ref_key: "table",
        ref: c
      }, e.$attrs, { style: { width: "100%" } }), [
        A(e.$slots, "default")
      ], 16)
    ]), v(1), t[0]);
  }
}), P = /* @__PURE__ */ (() => {
  const s = E;
  return s.install = (i) => {
    i.component("Datatables.netVue", s);
  }, s;
})();
export {
  P as default
};
